<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lmovingon - Code</title>
    <script src="../javascripts/jquery-min.js"></script>
    <script src="../javascripts/jquery.easing.1.3.js"></script>
    <script src="../javascripts/index.js"></script>
    <link rel="stylesheet" href="../stylesheets/base.css">
    <link rel="stylesheet" href="../stylesheets/baserps.css">
    <link rel="stylesheet" href="../stylesheets/code.css">
    <link rel="stylesheet" href="../stylesheets/coderps.css">
    <link rel = "Shortcut Icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../prettify/prettify.css">
</head>
<body onload="prettyPrint()">
    <div id="navmenu">
       <div id="nav">
            <a href="../index.html" id="logo"></a>
            <ul id="menu">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../code.html">Code</a></li>
                <li><a href="https://l-movingon.github.com/resume">About</a></li>
                <li><a href="../contact.html">Contact</a></li>
            </ul>
<!--            hanburger menu when the screen's width less than 768px-->
            <img src="../images/menu.png" id="Hmenu">
<!--            hanburget menu drop down -->
            <div id="HMDDBox">
                <ul id="HMDD">
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../code.html">Code</a></li>
                    <li><a href="https://l-movingon.github.com/resume">About</a></li>
                    <li><a href="../contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div id="navoverlay"></div>
    <div id="header">
        <div id="title">
            <h1>GIVEN&nbsp;ENOUGH&nbsp;EYEBALLS</h1>
            <h1>ALL&nbsp;BUGS&nbsp;ARE&nbsp;SHALLOW<span id="split">|</span></h1> 
        </div>
        <div id="overlay"></div>
    </div>
    <div id="container">
        <div id="sideBar">
            <ul><a class="linkhere" name="h5c3">HTML5 & CSS3</a>
                <li><a href="why-we-still-need-web-safe-fonts.html">Why We Still Need Web-safe Fonts</a></li>
                <li><a href="image-optimization.html">Image optimization</a></li>
                <li><a href="7-tips-for-improving-your-user-interface-design.html">7 Tips For Improving Your User Interface Design</a></li>
                <li><a href="what-is-the-dom.html">What is the DOM</a></li>
            </ul>
            <ul><a class="linkhere" name="js">JavaScript</a>
                <li><a href="about-closures.html">About Closures</a></li>
                <li><a href="about-event-loop.html">About Event Loop</a></li>
                <li><a href="''-string('')-new-string('').html">'', String(''), new String('')</a></li>
                <li><a href="about-hoisting.html">About Hoisting</a></li>
                <li><a href="about-this.html">About This</a></li>
                <li><a href="about-array-like.html">About Array-like</a></li>
                <li><a href="singleton-pattern.html">singleton pattern</a></li>
                <li><a href="getter-and-setter.html">getter and setter</a></li>
                <li><a href="i-am-totally-new-to-node-js.html">Hi, I'm totally new to Node.js</a></li>
                <li><a href="node-js-in-action-note.html" style="color: #209BD7">Node.js in action note</a></li>
                <li><a href="array-prototype.html">Array.prototype.?</a></li>
            </ul>
            <ul><a class="linkhere" name="ext">Ext js</a>
                <li><a href="ext-gridpanel-with-paging-upload.html">upload gridpanel with paging</a></li>
            </ul>
            <ul><a class="linkhere" name="react">React js</a>
                <li><a href="playlist-with-react.html">Playlist with react</a></li>
            </ul>
        </div>
        <div id="main">
            <h1>《Node.js in Action》小记 - Express</h1>
            <p>Node.js in Action这本书在2013年出版，所以里面很多的代码在现在的环境跑起来都是跑不通的，下面我就会说说在我学习第八章Express的时候，遇到的那些坑</p>
            <p>第八章一开始就以一个简单的应用 - Photo来教我们如何运用Express去渲染页面，去处理表单的上传，还有文件的下载</p>
            <p>还有书中用的EJS，我都换成了jade</p>
            <p style="font-weight: bold">Install the Express executable</p>
            <div class="codeHighLine">&nbsp;Code
                <pre class="prettyprint linenums">
npm install -g express
</pre>
            </div>
            <p>如果你还按书上这样安装，命令行还是会提示你：command not found，因为在4.x之后，你要这样</p>
            <div class="codeHighLine">&nbsp;Code
                <pre class="prettyprint linenums">
npm install -g express-generator
</pre>
        </div>
        <p>当你安装了Express之后，就可以执行</p>
        <div class="codeHighLine">&nbsp;Code
                <pre class="prettyprint linenums">
express --help
</pre>
        </div>
        <p>在4.x之后，options会少了很多，但这里要说的是 -css&lt;engine>竟然没有scss，<a href="http://stackoverflow.com/questions/23711897/get-sass-to-autocompile-with-nodejs-express-and-node-sass">Here is the resource</a></p>
        <p style="font-weight: bold">Exploring the application</p>
        <p>当你启动一个应用的时候，已经不是</p>
        <div class="codeHighLine">&nbsp;Code
                <pre class="prettyprint linenums">
node app.js
</pre>
        </div>
        <p>而是换成了</p>
        <div class="codeHighLine">&nbsp;Code
                <pre class="prettyprint linenums">
node ./bin/www
</pre>
        </div>
        <p>也就是不需要http的模块了，只要把app模块导出，用app.listen就可以了</p>
        <p>书中的app.configure也已经被去掉了，可以直接使用app.set()</p>
        <p>express.bodyParser已经换成了body-parser</p>
        <p>express.cookieSession已经换成了cookie-session</p>
        <p>express.cookieParser已经换成了cookie-parser</p>
        <p>...</p>
        <p>具体的改变还是要看这里吧 - <a href="http://expressjs.com/guide/migrating-4.html">Moving to Express 4</a></p>
        <p>网上说，学习node.js要整天看文档，因为更新得很快</p>
        <p>如果你也在这里被坑到，不知道怎么写下去，或者你也用想用jade去实现，可以看我对这个应用的实现，<a href="https://github.com/L-movingon/Everything-I-Learn/tree/master/nodejs/node-js-in-action/express/photo">Here!</a></p>
        <p>如有错误，欢迎指正 : )</p>
    </div>
    <div id="footer">
        <div id="copyright">© Copyright&nbsp;2015&nbsp;&nbsp;Lmovingon</div>
    </div>
    <script src="../prettify/prettify.js"></script>
</body>
</html>
