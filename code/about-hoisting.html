<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lmovingon - Code</title>
  <script src="../javascripts/jquery-min.js"></script>
  <script src="../javascripts/jquery.easing.1.3.js"></script>
  <script src="../javascripts/index.js"></script>
  <link rel="stylesheet" href="../stylesheets/base.css">
  <link rel="stylesheet" href="../stylesheets/baserps.css">
  <link rel="stylesheet" href="../stylesheets/code.css">
  <link rel="stylesheet" href="../stylesheets/coderps.css">
  <link rel="Shortcut Icon" href="../images/favicon.ico">
  <link rel="stylesheet" href="../prettify/prettify.css">
  <style>
    .button {
      display: block;
      width: 80px;
      height: 30px;
      background: #C7E9FA;
      text-align: center;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.5s;
    }
    .button:hover {
      background: #76CBF3;
    }
  </style>
</head>
<body onload="prettyPrint()">
  <div id="navmenu">
    <div id="nav">
      <a href="../index.html" id="logo"></a>
      <ul id="menu">
        <li><a href="../index.html">Home</a></li>
        <li><a href="../code.html">Code</a></li>
        <li><a href="https://l-movingon.github.com/resume">About</a></li>
        <li><a href="../contact.html">Contact</a></li>
      </ul>
      <!--            hanburger menu when the screen's width less than 768px-->
      <img src="../images/menu.png" id="Hmenu">
      <!--            hanburget menu drop down -->
      <div id="HMDDBox">
        <ul id="HMDD">
          <li><a href="../index.html">Home</a></li>
          <li><a href="../code.html">Code</a></li>
          <li><a href="https://l-movingon.github.com/resume">About</a></li>
          <li><a href="../contact.html">Contact</a></li>
        </ul>
      </div>
    </div>
  </div>
  <div id="navoverlay"></div>
  <div id="header">
    <div id="title">
      <h1>GIVEN&nbsp;ENOUGH&nbsp;EYEBALLS</h1>
      <h1>ALL&nbsp;BUGS&nbsp;ARE&nbsp;SHALLOW<span id="split">|</span></h1>
    </div>
    <div id="overlay"></div>
  </div>
  <div id="container">
    <div id="sideBar">
      <ul><a class="linkhere" name="h5c3">HTML5 & CSS3</a>
        <li><a href="why-we-still-need-web-safe-fonts.html">Why We Still Need Web-safe Fonts</a></li>
        <li><a href="image-optimization.html">Image optimization</a></li>
        <li><a href="7-tips-for-improving-your-user-interface-design.html">7 Tips For Improving Your User Interface Design</a></li>
        <li><a href="what-is-the-dom.html">What is the DOM</a></li>
      </ul>
      <ul><a class="linkhere" name="js">JavaScript</a>
        <li><a href="about-closures.html">About Closures</a></li>
        <li><a href="about-event-loop.html">About Event Loop</a></li>
        <li><a href="''-string('')-new-string('').html">'', String(''), new String('')</a></li>
        <li><a href="about-hoisting.html" style="color: #209BD7">About Hoisting</a></li>
        <li><a href="about-this.html">About This</a></li>
        <li><a href="about-array-like.html">About Array-like</a></li>
        <li><a href="singleton-pattern.html">singleton pattern</a></li>
        <li><a href="getter-and-setter.html">getter and setter</a></li>
        <li><a href="i-am-totally-new-to-node-js.html">Hi, I'm totally new to Node.js</a></li>
        <li><a href="node-js-in-action-note.html">Node.js in action note</a></li>
        <li><a href="array-prototype.html">Array.prototype.?</a></li>
        <li><a href="es6-in-depth-an-introduction.html">ES6 in depth - An Introduction</a></li>
      </ul>
      <ul><a class="linkhere" name="ext">Ext js</a>
        <li><a href="ext-gridpanel-with-paging-upload.html">upload gridpanel with paging</a></li>
      </ul>
      <ul><a class="linkhere" name="react">React js</a>
        <li><a href="playlist-with-react.html">Playlist with react</a></li>
      </ul>
    </div>
    <div id="main">
      <h1>JavaScript小记 - 变量提升</h1>
      <p>变量提升，就是当变量或者函数不管在哪里声明的时候，都会被提升到该作用域的顶部来声明</p>
      <p>这里有三个要注意的地方，我们也会在等下的例子里一个一个的说到</p>
      <p style="font-weight: bold">1. JavaScript没有块级作用域</p>
      <p style="font-weight: bold">2. 函数声明会覆盖变量声明，但不会覆盖变量赋值</p>
      <p style="font-weight: bold">3. 函数声明会提升，函数表达式不会被提升</p>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
var name = 'World!';
(function() {
    if(typeof name === 'undefined') {
        var name = 'Jack!';
        console.log('Goodbye ' + name);
    } else {
        console.log('Hello ' + name);
    }
})();                
</pre>
      </div>
      <p>打印出来的是 'Goodbye Jack'，因为JavaScript没有块级作用域，所以if语句里的 var name = 'Jack!', name变量的声明会被提升在if语句之外，变量声明没有被赋值所以为 undefined，进入if语句，name被赋值为 Jack，所以打印出来的是 Goodbye Jack! 真正执行的代码如下：</p>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
var name = 'World!';
(function() {
    var name;
    if(typeof name === 'undefined') {
        name = 'Jack!';
        console.log('Goodbye ' + name);
    } else {
        console.log('Hello ' + name);
    }
})();                
</pre>
      </div>
      <p>函数声明会覆盖变量声明，但不会覆盖变量赋值这句话又怎么理解呢？看看下面的两个例子：</p>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
function value() {
    return 1;
}
var value;
alert(typeof value);    //'function'   
</pre>
      </div>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
function value() {
    return 1;
}
var value = 1;
alert(typeof value);    //'number'   
</pre>
      </div>
      <p>当你声明的函数和你声明的变量(未赋值)同名时，函数的声明会覆盖变量的声明，这就是为什么第一个例子为'function'的原因。而第二个例子中，函数声明覆盖了变量声明，但因为value被赋值为1，所以value的类型则变为number</p>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
function foo(a) {
    console.log(a);
    var a = 2;
    function a() {}
    console.log(a);
}
foo(1);  
</pre>
      </div>
      <p>我们一起来分析一下这个例子，变量a声明提升，函数a声明提升，同名时函数覆盖变量，所以第一次打印出的是function a() {}。然后a被重新赋值为2，所以第二次打印的是2，棒棒哒~ 真正的执行顺序代码如下：</p>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
function foo(a) {
    var a ;
    function a() {}
    console.log(a);
    a = 2;
    console.log(a);
}
foo(1); 
</pre>
      </div>
      <p>最后由一个例子来看看 函数声明 和 函数表达式 的区别</p>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
function test() {
    foo(); // TypeError "foo is not a function"
    bar(); // "this will run!"
    var foo = function () { // function expression assigned to local variable 'foo'
        alert("this won't run!");
    }
    function bar() { // function declaration, given the name 'bar'
        alert("this will run!");
    }
}
test();
</pre>
      </div>
      <p>最后用一个问题来看看你都掌握了没有 :-)</p>
      <div class="codeHighLine">&nbsp;Code
        <pre class="prettyprint linenums">
var a = 1;
function b() {
    a = 10;
    return;
    function a() {}
}
b();
</pre>
      </div>
      <p class="button" onclick="alert('1\nCongratulations!');">alert(a);</p>
      <div class="commentBox">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          /* * * CONFIGURATION VARIABLES * * */
          var disqus_shortname = 'lmovingon';

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
      </div>
    </div>
  </div>
  <div id="footer">
    <div id="copyright">© Copyright&nbsp;2015&nbsp;&nbsp;Lmovingon</div>
  </div>
  <script src="../prettify/prettify.js"></script>
</body>
</html>